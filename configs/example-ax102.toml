# Proxmox VE Config — Hetzner AX102 Example
# AMD Ryzen 9 5950X, 128GB ECC, 2× 3.84TB NVMe (Samsung PM9A3)
#
# Copy and customize:
#   cp configs/example-ax102.toml configs/myserver.toml
#   vi configs/myserver.toml

[server]
hostname = "pve01"
fqdn = "pve01.example.com"
timezone = "UTC"
country = "de"          # de=Falkenstein/Nürnberg, fi=Helsinki
keyboard = "en-us"

[network]
interface = "eno1"      # Auto-detected in rescue; AX102 typically eno1 or enp7s0
source = "from-dhcp"    # Auto-detect from rescue DHCP
dns1 = "185.12.64.1"   # Hetzner DNS
dns2 = "185.12.64.2"
search_domain = "example.com"

[disk]
filesystem = "zfs"
zfs_raid = "raid1"
# Physical NVMe paths as seen in Hetzner rescue system (lsblk).
# The installer passes these to QEMU as virtio drives. Inside the QEMU VM,
# the Proxmox auto-installer sees /dev/vda + /dev/vdb and auto-discovers
# them — no disk-list is written to answer.toml.
disk_list = ["/dev/nvme0n1", "/dev/nvme1n1"]

[users]
email = "admin@example.com"
root_password = ""      # Will prompt interactively

[hardening]
permit_root_login = "prohibit-password"

# ZFS ARC for 128GB RAM — conservative 5%/10%
zfs_arc_min_gb = 6
zfs_arc_max_gb = 12

# Samsung PM9A3 NVMe — rated for 70°C max
smart_warn_temp = 50
smart_crit_temp = 70

# Brevo SMTP relay
smtp_relay_host = "[smtp-relay.brevo.com]:587"
smtp_user = "noreply@example.com"
smtp_key = ""           # SET THIS — 64-char Brevo SMTP key
notification_from = "noreply@example.com"
notification_email = "admin@example.com"
notification_author = "Proxmox pve01"

# Firewall
firewall_tcp_ports = [22, 8006]
firewall_allow_icmp = true
firewall_default_in = "DROP"

# Fail2ban
f2b_bantime = 3600
f2b_findtime = 600
f2b_maxretry = 3

# Sysctl
conntrack_max = 1048576
conntrack_tcp_timeout = 28800
