# Proxmox VE Config — EXAMPLE
# Copy this file and customize for your server.
# Used by: pve-install-hetzner.sh, pve-harden.sh, pve-network.sh

# ══════════════════════════════════════════════════════════════
#  INSTALLER — used by pve-install-hetzner.sh only
# ══════════════════════════════════════════════════════════════

[server]
hostname = "pve1"
fqdn = "pve1.example.com"
timezone = "UTC"
country = "us"
keyboard = "en-us"
iso_url = "https://enterprise.proxmox.com/iso/proxmox-ve_9.1-1.iso"

[network]
interface = "enp7s0"
source = "from-dhcp"
dns1 = "185.12.64.1"
dns2 = "185.12.64.2"
search_domain = "example.com"

[disk]
filesystem = "zfs"
zfs_raid = "raid1"
disk_list = ["/dev/nvme0n1", "/dev/nvme1n1"]

[users]
email = "admin@example.com"
root_password = ""

# ══════════════════════════════════════════════════════════════
#  HARDENING — used by pve-harden.sh
# ══════════════════════════════════════════════════════════════

[hardening]
permit_root_login = "prohibit-password"
ssh_port = 22
zfs_arc_min_gb = 6
zfs_arc_max_gb = 12
smart_warn_temp = 50
smart_crit_temp = 70
smtp_relay_host = "[smtp-relay.brevo.com]:587"
smtp_user = ""
smtp_key = ""
notification_from = ""
notification_email = ""
notification_author = "Proxmox pve1"
firewall_tcp_ports = [22, 8006]
firewall_allow_icmp = true
firewall_default_in = "DROP"
f2b_bantime = 3600
f2b_findtime = 600
f2b_maxretry = 3
conntrack_max = 1048576
conntrack_tcp_timeout = 28800

# ══════════════════════════════════════════════════════════════
#  NAT — used by pve-network.sh
#  Private bridge for VMs with outbound internet via masquerade
# ══════════════════════════════════════════════════════════════

[nat]
enabled = true
bridge = "vmbr1"
address = "10.10.10.1/24"      # Host gateway on the NAT bridge
upstream = "vmbr0"              # WAN-facing bridge (masquerade target)
dns1 = "1.1.1.1"               # For cloud-init / reference
dns2 = "8.8.8.8"

# ══════════════════════════════════════════════════════════════
#  TWEAKS — performance optimizations (pve-harden.sh)
# ══════════════════════════════════════════════════════════════

[tweaks]
tcp_bbr = true
tcp_fastopen = true
cpu_governor = "performance"
kernel_panic_reboot = 10
install_pigz = true
vzdump_ionice = 2
vzdump_bwlimit = 0
journal_max_size = "512M"
fs_inotify_max_user_watches = 1048576
fs_inotify_max_user_instances = 512
fs_file_max = 2097152
disable_ha_services = true
nag_removal_method = "dpkg-hook"
install_dark_theme = false
tune_ksm = true
optimize_logrotate = true
